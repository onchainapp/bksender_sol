(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1024:function(e,t,r){"use strict";r.r(t);r(102),r(78),r(91),r(108),r(34),r(52),r(39);var n,o,c,m,l,d,f,k,h,v,w,T,E,A,x,O,S,R,_,y,P,C,N,I,j,L,D,B,K,G=r(1),F=(r(87),r(88),r(33),r(10)),H=r(476),U=r(477),M=r(7),W=r(21),V=r(4),Q=r(46),Y=(r(255),r(132)),X={allowanceNumber:function(e){var t=0;try{t=Object(V.a)(e.allowance).gte(Object(V.a)(Math.pow(10,36)))?-1:Object(V.a)(e.allowance).div(Object(V.a)(10).pow(e.tokenSelected.decimals)).toString(10)}catch(e){console.info(e)}return t},balanceNumber:function(e){var t=0;try{t=Object(V.a)(e.balance).div(Object(V.a)(10).pow(e.tokenSelected.decimals)).toString(10)}catch(e){}return t},isNFTToken:function(e,t){return t.isERC721||t.isERC1155},isERC721:function(e){return 1==e.tokenType},isERC1155:function(e){return 2==e.tokenType},tokenInstance:function(e,t,r,n){return Object(G.a)(regeneratorRuntime.mark((function t(){var o,c,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.metamask,c=o.ethAccount,o.netId,t.next=3,n["metamask/web3"]();case 3:return m=t.sent,t.abrupt("return",new m.eth.Contract(H,e.address,{from:c}));case 5:case"end":return t.stop()}}),t)})))},tokenQueryInstance:function(e,t,r,n){return Object(G.a)(regeneratorRuntime.mark((function e(){var t,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.metamask,o=t.ethAccount,t.netId,e.next=3,n["metamask/web3"]();case 3:return c=e.sent,m=n["metamask/networkConfig"].tokenQueryContract,e.abrupt("return",new c.eth.Contract(U,m,{from:o}));case 6:case"end":return e.stop()}}),e)})))}},Z={setTokenAddress:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_ADDRESS",t.address)},setAproveTx:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_APPROVE_TX",t.txHash)},setAproveAmount:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_APPROVE_AMOUNT",t.amount)},setAproveTxStatus:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_APPROVE_TX_STATUS",t.status)},setTokenSelectedDisplayInfo:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_SELECTED_DISPLAY_INFO",t.tokenSelectedDisplayInfo)},setTokenSelected:(K=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,o=t.commit,c=t.state,m=r.selected,o("SET_TOKEN_SELECTED",m),o("SET_TOKEN_INFO_LOADED",!0),c.tokenSelected.isETH?o("SET_TOKEN_TYPE",0):(n("getTokenAllowce",{}),n("getTokenBalance",{})),e.prev=5,e.next=8,n("common/getNetIdStorage",{},{root:!0});case 8:(l=e.sent).lastTokenUsed=m,n("common/updateNetIdStorage",{netStorage:l},{root:!0}),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(5);case 15:case"end":return e.stop()}}),e,null,[[5,13]])}))),function(e,t){return K.apply(this,arguments)}),checkLastTokenSelected:(B=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.commit,t.state,o=null,e.prev=2,e.next=5,r("common/getNetIdStorage",{},{root:!0});case 5:c=e.sent,o=c.lastTokenUsed,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:return n("SET_TOKEN_SELECTED",o),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e){return B.apply(this,arguments)}),setTokenBalance:function(e,t){e.dispatch;var r=e.commit,n=(e.state,t.balance);r("SET_TOKEN_BALANCE",n),r("SET_TOKEN_BALANCE_LOADED",!0),console.info("Token Balance",n)},setTokenAllowance:function(e,t){e.dispatch;var r=e.commit,n=(e.state,t.allowance);-1!=n&&(r("SET_TOKEN_ALLOWANCE",n),r("SET_TOKEN_ALLOWANCE_LOADED",!0),console.info("Token Allowance",n))},clearUsedParams:(D=Object(G.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.dispatch,r=t.commit,t.rootState,r("CLEAR");case 2:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)}),initBaseParams:(L=Object(G.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.rootState,t.rootGetters,r=t.dispatch,t.commit,t.state,r("checkLastTokenSelected");case 2:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)}),checkAllowceEnough:(j=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.commit,m=t.rootState,l=r.finalAmount,d=null!=n.tokenSelected&&n.tokenSelected.isETH||null!=n.tokenSelected&&null!=n.tokenSelected.decimals&&n.allowance>0&&Object(V.a)(n.allowance).div(Object(V.a)(10).pow(n.tokenSelected.decimals)).gte(Object(V.a)(l)),o.isERC721&&(f=m.common.addressInfo,null!=n.tokenSelected.decimals&&(d=n.allowance>0&&Object(V.a)(n.allowance).div(Object(V.a)(10).pow(n.tokenSelected.decimals)).gte(Object(V.a)(f.finalData.length)))),c("SET_TOKEN_ALLOWANCE_ENOUGH",d),e.abrupt("return",d);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return j.apply(this,arguments)}),checkBalanceEnough:(I=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f,k,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.commit,m=t.rootState,l=r.finalAmount,d=m.metamask.balance,f=n.tokenSelected,k=!1,null!=f&&(f.isETH?k=Object(V.a)(d).gte(Object(V.a)(l)):(o.isERC721&&(h=m.common.addressInfo,k=Object(V.a)(n.balance).div(Object(V.a)(10).pow(n.tokenSelected.decimals)).gte(Object(V.a)(h.finalData.length))),o.isERC1155?k=!0:null!=f.decimals&&(k=Object(V.a)(n.balance).div(Object(V.a)(10).pow(n.tokenSelected.decimals)).gte(Object(V.a)(l))))),c("SET_TOKEN_BALANCE_ENOUGH",k),e.abrupt("return",k);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return I.apply(this,arguments)}),getTokenAddress:(N=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,r=t.getters,n=t.commit,e.next=3,r.tokenInstance();case 3:o=e.sent,n("SET_TOKEN_ADDRESS",o._address);case 5:case"end":return e.stop()}}),e)}))),function(e){return N.apply(this,arguments)}),getTokenBalance:(C=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,t.getters,o=t.rootGetters,c=t.rootState,(0,t.commit)("SET_TOKEN_BALANCE_LOADED",!1),m=o["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var l=function(){var d=Object(G.a)(regeneratorRuntime.mark((function d(f){var k,h,v,w,T,E,A,x,O,S,R,_;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return k=f.retryAttempt,h=void 0===k?1:k,h++,d.prev=2,(v=c.metamask).ethAccount,w=v.accountPublicKey,w=new M.c(w),d.next=7,o["metamask/connection"]();case 7:return T=d.sent,E=n.address,A=new M.c(E),x=new W.b(T,A,W.a,w),d.next=13,W.b.getAssociatedTokenAddress(x.associatedProgramId,x.programId,x.publicKey,w);case 13:return O=d.sent,d.next=16,T.getAccountInfo(O);case 16:if(null!=d.sent){d.next=20;break}return e({}),d.abrupt("return");case 20:return d.next=22,T.getTokenAccountBalance(O);case 22:S=d.sent,R=S.value,_=0,null!=R&&null!=R&&(_=R.amount),r("setTokenBalance",{balance:_}),e(_),d.next=33;break;case 30:d.prev=30,d.t0=d.catch(2),h>=m||"execution reverted"==d.t0.message?t(d.t0):l({retryAttempt:h});case 33:case"end":return d.stop()}}),d,null,[[2,30]])})));return function(e){return d.apply(this,arguments)}}();l({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)}),parseInsertTokenAddress:(P=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dispatch,t.state,t.getters,t.rootGetters,t.rootState,o=t.commit,c=r.tokenAddress,!Object(Q.a)(c)){e.next=24;break}return o("SET_TOKEN_ADDRESS",c),e.next=6,n("getTokenInfo");case 6:if(m=e.sent,0!=Object.keys(m).length){e.next=23;break}return e.next=10,n("checkTokenType");case 10:l=e.sent,console.info("TokenType2",l),e.t0=l,e.next=1===e.t0?15:2===e.t0?19:23;break;case 15:return e.next=17,n("getERC721TokenInfo");case 17:return m=e.sent,e.abrupt("break",23);case 19:return e.next=21,n("getERC1155TokenInfo");case 21:return m=e.sent,e.abrupt("break",23);case 23:return e.abrupt("return",m);case 24:case"end":return e.stop()}}),e)}))),function(e,t){return P.apply(this,arguments)}),fetchTokenPrice:(y=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,l,d,f,k,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootState,n=t.commit,o=t.dispatch,c=t.rootGetters,m=t.state,n("SET_PRICE_LOADED",!1),(l=c["metamask/networkConfig"]).smartContractPollTime,l.extraFeeOracle,d=l.supportExtraFee,r.metamask.netId,d){e.next=7;break}return n("SET_PRICE_LOADED",!0),e.abrupt("return");case 7:return e.next=9,o("bulksender/setExtraFee",{extraFee:0},{root:!0});case 9:if(n("SET_TOKEN_PRICE",0),"0x0000000000000000000000000000000000000000"!=(f=m.address)){e.next=14;break}return n("SET_PRICE_LOADED",!0),e.abrupt("return");case 14:if(k=f,!(h=c["metamask/networkConfig"].specialTokenList).includes(f)&&!h.includes(k)){e.next=21;break}return n("SET_TOKEN_PRICE",1),n("SET_PRICE_LOADED",!0),e.abrupt("return");case 21:return e.abrupt("return");case 24:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)}),getTokenInfo:(_=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,t.getters,o=t.rootGetters,c=t.rootState,m=t.commit,l=o["metamask/networkConfig"],d=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var l=function(){var t=Object(G.a)(regeneratorRuntime.mark((function t(f){var k,h,v,w,T,E,A,x,O,S,R,_,y,P,C,N,I;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k=f.retryAttempt,h=void 0===k?1:k,h++,t.prev=2,(v=c.metamask).ethAccount,w=v.accountPublicKey,T=v.tokensList,w=new M.c(w),t.next=7,o["metamask/connection"]();case 7:return E=t.sent,A=n.address,x=new M.c(A),O=new W.b(E,x,W.a,w),(S=T[n.address.toLowerCase()])||(S={symbol:"SPL",name:"SPL Token"}),R={},t.next=16,E.getTokenSupply(O.publicKey);case 16:return _=t.sent,R={contractAddress:n.address,balance:0,name:S.name,symbol:S.symbol,decimals:_.value.decimals},t.next=20,r("setTokenSelected",{selected:R});case 20:return t.next=22,W.b.getAssociatedTokenAddress(O.associatedProgramId,O.programId,O.publicKey,w);case 22:return y=t.sent,P=0,C=n.unlimitedApproveAmount,t.prev=25,t.next=28,E.getTokenAccountBalance(y);case 28:N=t.sent,I=N.value,console.info(I),null==I?R={contractAddress:n.address,balance:0,name:"Error Token",symbol:"Error Token",decimals:0}:(P=I.amount,R={contractAddress:n.address,balance:I.amount,name:R.name,symbol:R.symbol,decimals:I.decimals}),t.next=36;break;case 34:t.prev=34,t.t0=t.catch(25);case 36:r("setTokenSelected",{selected:R}),r("setTokenBalance",{balance:P}),r("setTokenAllowance",{allowance:C}),m("SET_TOKEN_TYPE",3),e(R),t.next=47;break;case 43:t.prev=43,t.t1=t.catch(2),console.info("get Token Info exception",t.t1),h>=d||"execution reverted"==t.t1.message?e({}):l({retryAttempt:h});case 47:case"end":return t.stop()}}),t,null,[[2,43],[25,34]])})));return function(e){return t.apply(this,arguments)}}();l({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return _.apply(this,arguments)}),getERC721TokenInfo:(R=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,l=c["metamask/networkConfig"],d=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(G.a)(regeneratorRuntime.mark((function t(l){var f,k,h,v,data,w,T,E,A,symbol,x,O,S;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=l.retryAttempt,k=void 0===f?1:f,k++,t.prev=2,h=m.metamask.ethAccount,m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return v=t.sent,data=v.methods.queryERC721TokenInfo(n.address,h).encodeABI(),w={method:"eth_call",params:[{from:h,to:v._address,data:data},"latest"],from:h},t.next=12,r("metamask/sendAsync",w,{root:!0});case 12:if(null==(T=t.sent)){t.next=21;break}E=Y.decodeParameters([{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"decimals",type:"uint256"},{name:"totalSupply",type:"uint256"},{name:"balance",type:"uint256"},{name:"allowance",type:"uint256"}],T),A=E.name,symbol=E.symbol,x=E.decimals,E.totalSupply,O=E.balance,E.allowance,S={contractAddress:n.address,balance:O,name:A,symbol:symbol,decimals:x},r("setTokenSelected",{selected:S}),r("setTokenBalance",{balance:O}),e(S),t.next=22;break;case 21:throw Error("Fetch token info failed");case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(2),k>=d?e({}):c({retryAttempt:k});case 27:case"end":return t.stop()}}),t,null,[[2,24]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return R.apply(this,arguments)}),getERC1155TokenInfo:(S=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,l=c["metamask/networkConfig"],d=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(G.a)(regeneratorRuntime.mark((function t(l){var f,k,h,v,symbol,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=l.retryAttempt,k=void 0===f?1:f,k++,t.prev=2,m.metamask.ethAccount,m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return t.sent,t.next=10,r("getBaseNFTTokenInfo");case 10:h=t.sent,v=h.name,symbol=h.symbol,console.info(v),w={contractAddress:n.address,balance:0,name:v,symbol:symbol,decimals:0},r("setTokenSelected",{selected:w}),r("setTokenBalance",{balance:0}),e(w),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(2),k>=d?e({}):c({retryAttempt:k});case 24:case"end":return t.stop()}}),t,null,[[2,21]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return S.apply(this,arguments)}),getBaseNFTTokenInfo:(O=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,l=c["metamask/networkConfig"],d=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var c=function(){var t=Object(G.a)(regeneratorRuntime.mark((function t(l){var f,k,h,v,data,w,T,E,A,symbol;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=l.retryAttempt,k=void 0===f?1:f,k++,t.prev=2,h=m.metamask.ethAccount,m.bulksender.bulksenderAddress,t.next=7,o.tokenQueryInstance();case 7:return v=t.sent,data=v.methods.queryERC721TokenBaseInfo(n.address).encodeABI(),w={method:"eth_call",params:[{from:h,to:v._address,data:data},"latest"],from:h},t.next=12,r("metamask/sendAsync",w,{root:!0});case 12:if(null==(T=t.sent)){t.next=18;break}E=Y.decodeParameters([{name:"name",type:"string"},{name:"symbol",type:"string"}],T),A=E.name,symbol=E.symbol,e({name:A,symbol:symbol}),t.next=19;break;case 18:throw Error("Fetch token info failed");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(2),k>=d||"execution reverted"==t.t0.message?e({name:"NFT-ERC1155",symbol:"ERC1155"}):c({retryAttempt:k});case 24:case"end":return t.stop()}}),t,null,[[2,21]])})));return function(e){return t.apply(this,arguments)}}();c({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return O.apply(this,arguments)}),checkTokenType:(x=Object(G.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.state,t.getters,t.rootGetters,t.rootState,(0,t.commit)("SET_TOKEN_TYPE",3),e.abrupt("return",3);case 3:case"end":return e.stop()}}),e)}))),function(e){return x.apply(this,arguments)}),checkNFTType:(A=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,l=r.isERC721,d=c["metamask/networkConfig"],f=d.rpcCallRetryAttempt,d.tokenQueryContract,d.supportsNFT,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(G.a)(regeneratorRuntime.mark((function t(c){var d,k,h,v,w,T,data,E;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d=c.retryAttempt,k=void 0===d?1:d,k++,t.prev=2,h=!1,v=m.metamask.ethAccount,t.next=7,o.tokenInstance();case 7:return w=t.sent,T="0xd9b67a26",l&&(T="0x80ac58cd"),data=w.methods.supportsInterface(T).encodeABI(),E={method:"eth_call",params:[{from:v,to:w._address,data:data},"latest"],from:v},t.next=14,n("metamask/sendAsync",E,{root:!0});case 14:h=t.sent,h=Object(F.hexToNumberString)(h),e(h="1"==h||1==h),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(2),console.info("Check token type again:",t.t0),k>=f||"execution reverted"==t.t0.message?e(!1):r({retryAttempt:k});case 24:case"end":return t.stop()}}),t,null,[[2,20]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return A.apply(this,arguments)}),bulkQueryTokenAccounts:(E=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,o=t.state,t.getters,c=t.rootGetters,m=t.rootState,t.commit,r.tokenAddress,l=r.addresses,r.tokenIds,d=c["metamask/networkConfig"],f=d.rpcCallRetryAttempt,d.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var d=Object(G.a)(regeneratorRuntime.mark((function d(k){var h,v,w,T,E,A,x,address,O,S,R,_,y,P,C,N,I,j,L;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return h=k.retryAttempt,v=void 0===h?1:h,v++,d.prev=2,w=m.metamask.accountPublicKey,w=new M.c(w),d.next=7,c["metamask/connection"]();case 7:if(T=d.sent,E=[],A=[],!o.tokenSelected.isETH){d.next=14;break}for(x=0;x<l.length;x++)address=l[x],O=new M.c(address),S=O,A.push(S),E.push({method:"getAccountInfo",params:[S.toString(),{encoding:"jsonParsed"}]});d.next=29;break;case 14:R=o.address,_=new M.c(R),y=new W.b(T,_,W.a,w),x=0;case 18:if(!(x<l.length)){d.next=29;break}return P=l[x],C=new M.c(P),d.next=23,W.b.getAssociatedTokenAddress(y.associatedProgramId,y.programId,y.publicKey,C);case 23:N=d.sent,A.push(N),E.push({method:"getAccountInfo",params:[N.toString(),{encoding:"jsonParsed"}]});case 26:x++,d.next=18;break;case 29:return I={params:E},d.next=32,n("metamask/sendRrcRequest",I,{root:!0});case 32:j=d.sent,L=[],j.forEach((function(e,i){if(null==e)L.push({isNew:!0,tokenAccount:A[i]});else{if(!e.hasOwnProperty("owner"))throw Error("Query accounts failed");L.push({isNew:!1,tokenAccount:A[i]})}})),e(L),d.next=42;break;case 38:d.prev=38,d.t0=d.catch(2),console.info(d.t0),v>=f?t(d.t0):r({retryAttempt:v});case 42:case"end":return d.stop()}}),d,null,[[2,38]])})));return function(e){return d.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return E.apply(this,arguments)}),bulkFindBadTokenAccounts:(T=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,n=t.state,t.getters,o=t.rootGetters,c=t.rootState,t.commit,r.tokenAddress,m=r.addresses,l=o["metamask/networkConfig"],d=l.rpcCallRetryAttempt,l.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var l=Object(G.a)(regeneratorRuntime.mark((function l(f){var k,h,v,w,T,E,A,x,O,address,S;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return k=f.retryAttempt,h=void 0===k?1:k,h++,l.prev=2,v=c.metamask.accountPublicKey,v=new M.c(v),l.next=7,o["metamask/connection"]();case 7:if(w=l.sent,T=[],n.tokenSelected.isETH){l.next=30;break}E=n.address,A=new M.c(E),x=new W.b(w,A,W.a,v),O=0;case 15:if(!(O<m.length)){l.next=30;break}return address=m[O],S=new M.c(address),l.prev=18,l.next=21,W.b.getAssociatedTokenAddress(x.associatedProgramId,x.programId,x.publicKey,S);case 21:T.push("0x0000000000000000000000000000000000000000"),l.next=27;break;case 24:l.prev=24,l.t0=l.catch(18),T.push(address);case 27:O++,l.next=15;break;case 30:e(T),l.next=36;break;case 33:l.prev=33,l.t1=l.catch(2),h>=d?t(l.t1):r({retryAttempt:h});case 36:case"end":return l.stop()}}),l,null,[[2,33],[18,24]])})));return function(e){return l.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return T.apply(this,arguments)}),bulkQueryBalances:(w=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f,k,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,l=r.tokenAddress,d=r.addresses,f=r.tokenIds,k=c["metamask/networkConfig"],h=k.rpcCallRetryAttempt,k.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(G.a)(regeneratorRuntime.mark((function c(k){var v,w,T,E,data,A,x,O,S;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return v=k.retryAttempt,w=void 0===v?1:v,w++,c.prev=2,T=m.metamask.ethAccount,c.next=6,o.tokenQueryInstance();case 6:return E=c.sent,data=o.isERC1155?E.methods.bulkQueryERC1155Balances(l,d,f).encodeABI():E.methods.bulkQueryBalances(l,d).encodeABI(),A={method:"eth_call",params:[{from:T,to:E._address,data:data},"latest"],from:T},c.next=11,n("metamask/sendAsync",A,{root:!0});case 11:if(null==(x=c.sent)){c.next=17;break}O=Y.decodeParameters([{name:"balances",type:"uint256[]"}],x),S=O.balances,e(S),c.next=18;break;case 17:throw Error("BulkQueryBalances failed");case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(2),w>=h?t(c.t0):r({retryAttempt:w});case 23:case"end":return c.stop()}}),c,null,[[2,20]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return w.apply(this,arguments)}),checkApproveTransactionStatus:(v=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,l,d,f,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.approveTx,l=r.approveAmount,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=4,e.next=7,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 7:null!=(f=e.sent)?(k=f.status,c("SET_TOKEN_APPROVE_TX_STATUS",k="0x1"==k||1==k?1:-2),c("SET_TOKEN_ALLOWANCE",l)):setTimeout((function(){o("checkApproveTransactionStatus")}),1e3*d),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),setTimeout((function(){o("checkApproveTransactionStatus")}),1e3*d);case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),function(e){return v.apply(this,arguments)}),getTokenAllowce:(h=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,t.getters,r=t.commit,n=t.dispatch,o=t.rootGetters,c=t.state,r("SET_TOKEN_ALLOWANCE_LOADED",!1),m=o["metamask/networkConfig"],l=m.rpcCallRetryAttempt,m.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(G.a)(regeneratorRuntime.mark((function t(o){var m,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m=o.retryAttempt,d=void 0===m?1:m,d++;try{f=c.unlimitedApproveAmount,n("setTokenAllowance",{allowance:f}),e(f)}catch(t){d>=l||"execution reverted"==t.message?e(0):r({retryAttempt:d})}case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)}),approveForBulksender:(k=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,(m=r.amount)!=n.unlimitedApproveAmount&&(m=Object(V.a)(m).times(Object(V.a)(10).pow(parseInt(n.tokenSelected.decimals))).toString(10)),l=o.bulksender.bulksenderAddress,e.next=6,c("approve",{bulksenderAddress:l,amount:m});case 6:return d=e.sent,e.abrupt("return",d);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return k.apply(this,arguments)}),approveForBulksenderForNFTToken:(f=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,r.amount,l=o.bulksender.bulksenderAddress,m=n.unlimitedApproveAmount,e.next=7,c("_approveForNFTToken",{bulksenderAddress:l,setApproveAll:!0,amount:m});case 7:return d=e.sent,e.abrupt("return",d);case 9:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)}),revokeApproveOfBulksenderForNFTToken:(d=Object(G.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,r=t.rootState,t.rootGetters,n=t.dispatch,t.commit,o=r.bulksender.bulksenderAddress,e.next=6,n("_approveForNFTToken",{bulksenderAddress:o,setApproveAll:!1,amount:0});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)}),checkAddressIsContract:(l=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,t.state,o=t.getters,c=t.rootGetters,m=t.rootState,t.commit,l=r.addresses,d=c["metamask/networkConfig"],f=d.rpcCallRetryAttempt,d.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var c=Object(G.a)(regeneratorRuntime.mark((function c(d){var k,h,v,w,data,T,E,A,x;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return k=d.retryAttempt,h=void 0===k?1:k,h++,c.prev=2,v=m.metamask.ethAccount,c.next=6,o.tokenQueryInstance();case 6:return w=c.sent,data=w.methods.bulkCheckIfContracts(l).encodeABI(),T={method:"eth_call",params:[{from:v,to:w._address,data:data},"latest"],from:v},c.next=11,n("metamask/sendAsync",T,{root:!0});case 11:if(null==(E=c.sent)){c.next=17;break}A=Y.decodeParameters([{name:"contracts",type:"address[]"}],E),x=A.contracts,e(x),c.next=18;break;case 17:throw Error("bulkCheckIfContracts failed");case 18:c.next=23;break;case 20:c.prev=20,c.t0=c.catch(2),h>=f?t(c.t0):r({retryAttempt:h});case 23:case"end":return c.stop()}}),c,null,[[2,20]])})));return function(e){return c.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)}),checkTokenOwners:(m=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,o=t.state,c=t.getters,m=t.rootGetters,l=t.rootState,t.commit,d=r.tokenIds,f=m["metamask/networkConfig"],k=f.rpcCallRetryAttempt,f.tokenQueryContract,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(G.a)(regeneratorRuntime.mark((function m(f){var h,v,w,T,data,E,A,x,O;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return h=f.retryAttempt,v=void 0===h?1:h,v++,m.prev=2,w=l.metamask.ethAccount,m.next=6,c.tokenQueryInstance();case 6:return T=m.sent,data=T.methods.bulkQueryERC721Owers(o.address,d).encodeABI(),E={method:"eth_call",params:[{from:w,to:T._address,data:data},"latest"],from:w},m.next=11,n("metamask/sendAsync",E,{root:!0});case 11:if(null==(A=m.sent)){m.next=17;break}x=Y.decodeParameters([{name:"addrOwners",type:"address[]"}],A),O=x.addrOwners,e(O),m.next=18;break;case 17:throw Error("bulkCheckIfContracts failed");case 18:m.next=23;break;case 20:m.prev=20,m.t0=m.catch(2),v>=k?t(m.t0):r({retryAttempt:v});case 23:case"end":return m.stop()}}),m,null,[[2,20]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return m.apply(this,arguments)}),checkApproval:(c=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f,k,h,v,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,l=t.commit,d=r.amount,f=n.checkZeroTimes,d=Object(V.a)(d).times(Object(V.a)(10).pow(parseInt(n.tokenSelected.decimals))).toString(10),k=c.bulksender.bulksenderAddress,e.next=7,o.tokenInstance();case 7:return h=e.sent,v=c.metamask.ethAccount,w=0,e.abrupt("return",new Promise((function(e,t){var r=function(){var t=Object(G.a)(regeneratorRuntime.mark((function t(n){var o,c,T,data,E,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.retryAttempt,c=void 0===o?0:o,c++,t.prev=2,(T=c>=Math.ceil(f/2)+1)&&(d="0"),data=h.methods.approve(k,d).encodeABI(),E={method:"eth_estimateGas",params:[{from:v,to:h._address,data:data,value:Object(F.numberToHex)(0)}],from:v},t.next=9,m("metamask/sendAsync",E,{root:!0});case 9:A=t.sent,A=Object(F.hexToNumber)(A),l("SET_NEED_TO_RESET_APPROVAL",T),T&&(w=-1),e({usedApproveZero:T,errorType:w}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),c>=f?e({usedApproveZero:!0,errorType:w=-2}):r({retryAttempt:c});case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(e){return t.apply(this,arguments)}}();r({})})));case 11:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)}),approve:(o=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f,k,h,v,w,T,data,E,A,x,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,l=t.commit,d=r.bulksenderAddress,f=r.amount,k=0,h=null,e.prev=4,v=o.metamask.ethAccount,w=o.metamask.gasPrice.fast,c["metamask/networkConfig"].specialAccountList.includes(v)&&(w=o.metamask.gasPrice.instant),e.next=11,n.tokenInstance();case 11:return T=e.sent,data=T.methods.approve(d,f).encodeABI(),E={method:"eth_estimateGas",params:[{from:v,to:T._address,data:data,value:Object(F.numberToHex)(0)}],from:v},e.next=16,m("metamask/sendAsync",E,{root:!0});case 16:return A=e.sent,A=Object(F.hexToNumber)(A),console.log("approve tx",A),x={method:"eth_sendTransaction",params:[{from:v,to:T._address,gas:Object(F.numberToHex)(A+5e4),gasPrice:Object(F.toHex)(Object(F.toWei)(w.toString(),"gwei")),value:Object(F.numberToHex)(0),data:data}],from:v},e.next=22,m("metamask/sendAsync",x,{root:!0});case 22:return O=e.sent,l("ADD_TX",O),l("SET_TOKEN_APPROVE_TX",O),l("SET_TOKEN_APPROVE_TX_STATUS",0),l("SET_TOKEN_APPROVE_AMOUNT",f),m("checkApproveTransactionStatus"),e.abrupt("return",{txHash:O,errorType:k});case 31:return e.prev=31,e.t0=e.catch(4),console.info(e.t0),e.abrupt("return",{txHash:h,errorType:k});case 35:case"end":return e.stop()}}),e,null,[[4,31]])}))),function(e,t){return o.apply(this,arguments)}),_approveForNFTToken:(n=Object(G.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f,k,h,v,w,T,E,data,A,x,O,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,n=t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,l=t.commit,d=r.bulksenderAddress,f=r.setApproveAll,k=r.amount,h=0,v=null,e.prev=4,w=o.metamask.ethAccount,T=o.metamask.gasPrice.fast,c["metamask/networkConfig"].specialAccountList,e.next=10,n.tokenInstance();case 10:return E=e.sent,data=E.methods.setApprovalForAll(d,f).encodeABI(),A={method:"eth_estimateGas",params:[{from:w,to:E._address,data:data,value:Object(F.numberToHex)(0)}],from:w},e.next=15,m("metamask/sendAsync",A,{root:!0});case 15:return x=e.sent,x=Object(F.hexToNumber)(x),console.log("approve tx",x),O={method:"eth_sendTransaction",params:[{from:w,to:E._address,gas:Object(F.numberToHex)(x+5e4),gasPrice:Object(F.toHex)(Object(F.toWei)(T.toString(),"gwei")),value:Object(F.numberToHex)(0),data:data}],from:w},e.next=21,m("metamask/sendAsync",O,{root:!0});case 21:return S=e.sent,l("ADD_TX",S),l("SET_TOKEN_APPROVE_TX",S),l("SET_TOKEN_APPROVE_TX_STATUS",0),l("SET_TOKEN_APPROVE_AMOUNT",k),m("checkApproveTransactionStatus"),e.abrupt("return",{txHash:S,errorType:h});case 30:return e.prev=30,e.t0=e.catch(4),console.info(e.t0),e.abrupt("return",{txHash:v,errorType:h});case 34:case"end":return e.stop()}}),e,null,[[4,30]])}))),function(e,t){return n.apply(this,arguments)})};t.default={namespaced:!0,state:function(){return{address:null,balance:0,balanceDisplay:"",allowance:0,allowanceNumber:0,balanceNumber:0,allowanceEnough:!1,balanceEnough:!1,approveAmount:0,approveTx:"",approveTxStatus:-1,tokenSelected:null,tokenSelectedDisplayInfo:"",txs:[],tokenBalanceLoaded:!1,tokenAllowanceLoaded:!1,tokenInfoLoaded:!1,checkZeroTimes:4,needToResetApproval:!1,isERC721:!1,isERC1155:!1,tokenType:3,isNFTToken:!1,nftApproveAmount:"100000000000000000000000000000000000000001",unlimitedApproveAmount:"115792089237316195423570985008687907853269984665640564039457584007913129639935",price:0,priceLoaded:!1}},getters:X,mutations:{SET_TOKEN_ADDRESS:function(e,address){e.address=address},SET_TOKEN_BALANCE:function(e,t){e.balance=t},SET_TOKEN_SELECTED:function(e,t){e.tokenSelected=t},SET_TOKEN_SELECTED_DISPLAY_INFO:function(e,t){e.tokenSelectedDisplayInfo=t},SET_TOKEN_ALLOWANCE:function(e,t){e.allowance=t},SET_TOKEN_ALLOWANCE_ENOUGH:function(e,t){e.allowanceEnough=t},SET_TOKEN_BALANCE_ENOUGH:function(e,t){e.balanceEnough=t},SET_TOKEN_APPROVE_AMOUNT:function(e,t){e.approveAmount=t},SET_TOKEN_APPROVE_TX:function(e,t){e.approveTx=t},SET_TOKEN_APPROVE_TX_STATUS:function(e,t){e.approveTxStatus=t},SET_TOKEN_BALANCE_LOADED:function(e,t){e.tokenBalanceLoaded=t},SET_TOKEN_ALLOWANCE_LOADED:function(e,t){e.tokenAllowanceLoaded=t},SET_TOKEN_INFO_LOADED:function(e,t){e.tokenInfoLoaded=t},SET_NEED_TO_RESET_APPROVAL:function(e,t){e.needToResetApproval=t},SET_IS_ERC_721:function(e,t){e.isERC721=t},SET_TOKEN_TYPE:function(e,t){e.tokenType=t},SET_TOKEN_PRICE:function(e,t){e.price=t},SET_PRICE_LOADED:function(e,t){e.priceLoaded=t},ADD_TX:function(e,t){e.txs.push(t)},CLEAR:function(e){e.approveTx="",e.approveTxStatus=-1,e.needToResetApproval=!1}},actions:Z}},824:function(e,t,r){"use strict";r.r(t);r(72),r(56),r(34),r(52),r(178);var n,o=r(2),c=(r(91),r(108),r(102),r(825),r(39),r(1)),m=(r(87),r(88),r(33),r(176)),l=r.n(m),d=r(473),f=r.n(d),k=r(10),h=r(119),v=r(4),w=r(474),T=r(7),E=r(21),A=r(177);function x(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var S,R,_,y,P,C,N,I,j,L,D,B,K,G,F,H,U=function(e){var t=e.newAccount;(0,e.commit)("IDENTIFY",Object(k.toChecksumAddress)(t[0])),window.location.reload()},M={netId:function(e){return e.netId},isApiValible:function(e){return 1==e.netId},networkName:function(e){return h.a["netId".concat(e.netId)].networkName},currency:function(e){return h.a["netId".concat(e.netId)].currencyName},miniDeposit:function(e){return Object(v.a)(e.minDeposiBalance).div(Object(v.a)(10).pow(e.decimals)).toString(10)},networkConfig:function(e){var t=h.a["netId".concat(e.netId)];return e.workedRPC&&(t.rpcUrl=e.workedRPC),t},getEthereumProvider:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function r(){var n,o,c,m,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=e.providerName,e.networkName,r.t0=n,r.next="Solflare"===r.t0?4:"Glow"===r.t0?5:"Slope"===r.t0?6:"Sollet"===r.t0?10:"walletConnect"===r.t0?18:(r.t0,24);break;case 4:return r.abrupt("return",window.solflare);case 5:return r.abrupt("return",window.glowSolana);case 6:if(!window.SlopeForBulksender){r.next=8;break}return r.abrupt("return",window.SlopeForBulksender);case 8:return o=new window.Slope,r.abrupt("return",window.SlopeForBulksender=o);case 10:if(!window.solletForBulksender){r.next=12;break}return r.abrupt("return",window.solletForBulksender);case 12:return c=t.networkConfig.rpcUrl,new T.a(c,"confirmed"),"https://www.sollet.io",m=new w.a("https://www.sollet.io"),window.solletForBulksender=m,r.abrupt("return",m);case 18:if(!window.walletProviderForBulksender){r.next=20;break}return r.abrupt("return",window.walletProviderForBulksender);case 20:return l=new f.a({rpc:{1:"https://api.mycryptoapi.com/eth"},bridge:"https://bridge.walletconnect.org",qrcode:!0,pollingInterval:15e3}),window.walletProviderForBulksender=l,r.abrupt("return",l);case 24:return r.abrupt("return",window.solana);case 25:case"end":return r.stop()}}),r)})))},customRPCProvider:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new l.a.providers.HttpProvider(r),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))},web3:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getEthereumProvider();case 2:return r=e.sent,e.abrupt("return",Object.freeze(new l.a(r)));case 4:case"end":return e.stop()}}),e)})))},connection:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new T.a(r,"confirmed"),e.abrupt("return",Object.freeze(n));case 3:case"end":return e.stop()}}),e)})))},connectionChanged:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new T.a(r,"confirmed"),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})))},customRPCWeb3:function(e,t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.networkConfig.rpcUrl,n=new l.a.providers.HttpProvider(r),e.abrupt("return",Object.freeze(new l.a(n)));case 3:case"end":return e.stop()}}),e)})))}},W={IDENTIFY:function(e,t){e.ethAccount=t},SET_NET_ID:function(e,t){t=parseInt(t,10),e.netId=t},SET_BALANCE:function(e,t){e.balance=Object(v.a)(t).div(Object(v.a)(10).pow(Object(v.a)(e.decimals))).toString(10)},SET_WALLET_STATE:function(e,t){e.walletState=t},SET_ADDRESS:function(e,t){var address=t.address,r=t.valid,n=void 0!==r&&r;e.address={value:address,valid:n}},SET_PUBLICKEY:function(e,t){e.accountPublicKey=t},SAVE_GAS_PRICE:function(e,t){e.gasPrice=t},SAVE_TOKENS_LIST:function(e,t){e.tokensList=t},SAVE_WORKED_RPC:function(e,t){e.workedRPC=t},SET_GAS_PRICE_ORACLE_LOCKED:function(e,t){e.gasPriceOracleLocked=t},SAVE_TOKENS:function(e,t){e.tokens=t},SET_TOKEN_ADDRESS:function(e,t){e.tokenAddress=t},SET_FETCHING:function(e,t){e.isFetching=t},SET_PROVIDER_NAME:function(e,t){e.providerName=t},SET_NETWORK_NAME:function(e,t){e.networkName=t},SET_INITIALIZED:function(e,t){e.initialized=t},SET_IS_IMTOKEN:function(e,t){e.isImToken=t},SET_IS_TRUSTWALLET:function(e,t){e.isTrustWallet=t},SET_WALLET_NAME:function(e,t){e.walletName=t},SET_MIN_DEPOSIT_BALANCE:function(e,t){e.minDeposiBalance=t},SAVE_ETH_PRICE:function(e,t){e.ethPrice=t},SET_ETH_PRICE_LOADED:function(e,t){e.ethPriceLoaded=t},SET_MIN_TOKEN_ACCOUNT_INIT_AMOUNT:function(e,t){e.minTokenAccountInitAmount=t},SET_MIN_GAS_FEE:function(e,t){e.minGasFee=t},SET_FEE_RATE_GOVERNOR:function(e,t){e.feeRateGovernor=t}},V=(n={setAddress:function(e,t){e.dispatch;(0,e.commit)("SET_ADDRESS",{address:t.address,valid:!0})},setTokenAddress:function(e,t){e.dispatch;(0,e.commit)("SET_TOKEN_ADDRESS",t.address)},setWalletName:function(e,t){var r=e.dispatch,n=e.commit,o=t.walletName;n("SET_WALLET_NAME",o),r("common/saveLastUsedWalletName",{walletName:o},{root:!0})},onNetworkChanged:function(e,t){(0,e.commit)("SET_NET_ID",t.netId)},onChainIdChanged:function(e,t){var r=e.commit,n=t.chainId;r("SET_NET_ID",Object(k.hexToNumber)(n))},closeProvider:(H=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch,t.state,n=t.getters,o=t.commit,c=r.providerName,e.next=4,n.getEthereumProvider();case 4:m=e.sent,e.t0=c,e.next="walletConnect"===e.t0?8:"walletLink"===e.t0?11:"mewConnect"===e.t0?14:17;break;case 8:return e.next=10,m.close();case 10:window.walletProviderForBulksender=void 0;case 11:return e.next=13,m.close();case 13:window.walletLinkForBulksender=void 0;case 14:return e.next=16,m.disconnect();case 16:window.connectMewForBulksender=void 0;case 17:return e.next=19,m.disconnect();case 19:return console.info("Disconnected"),e.abrupt("break",21);case 21:return o("IDENTIFY",null),o("SET_PROVIDER_NAME",""),o("SET_WALLET_NAME",""),e.abrupt("return",!0);case 25:case"end":return e.stop()}}),e)}))),function(e,t){return H.apply(this,arguments)}),getBalance:function(e){e.dispatch;var t=e.state,r=e.getters,n=e.rootGetters,o=r.networkConfig.rpcCallRetryAttempt;return new Promise((function(e,r){var m=function(){var l=Object(c.a)(regeneratorRuntime.mark((function c(l){var d,f,k,h,v;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=l.retryAttempt,f=void 0===d?1:d,f++,c.prev=2,c.next=5,n["metamask/connection"]();case 5:return k=c.sent,h=new T.c(t.accountPublicKey),c.next=9,k.getBalance(h);case 9:v=c.sent,e(v),c.next=17;break;case 13:c.prev=13,c.t0=c.catch(2),console.info(c.t0),f>=o?r(c.t0):m({retryAttempt:f});case 17:case"end":return c.stop()}}),c,null,[[2,13]])})));return function(e){return l.apply(this,arguments)}}();m({})}))},getBlockHeight:(F=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,o=r.customRPC,m=void 0===o?void 0:o,e.abrupt("return",new Promise((function(e,t){var r=function(){var o=Object(c.a)(regeneratorRuntime.mark((function o(c){var l,d,f,k;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=c.retryAttempt,d=void 0===l?1:l,o.prev=1,f={params:{method:"getBlockHeight",params:[]}},m&&(f.customRPC=m),o.next=7,n("metamask/sendRrcRequest",f,{root:!0});case 7:k=o.sent,e(k),o.next=15;break;case 11:o.prev=11,o.t0=o.catch(1),++d>=2?t(o.t0):r({retryAttempt:d});case 15:case"end":return o.stop()}}),o,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return F.apply(this,arguments)}),checkRPCService:(G=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,m,l,d,f,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.state,n=t.getters,t.rootGetters,o=t.commit,m=n.networkConfig,l=m.rpcUrl,null==(d=m.backupRpcs)&&(d=[l]),f=[l].concat(d),k=f.length,e.abrupt("return",new Promise((function(e,t){var n=function(){var m=Object(c.a)(regeneratorRuntime.mark((function c(m){var l,d,h,v;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return l=m.retryAttempt,d=void 0===l?0:l,c.prev=1,h=f[d%f.length],c.next=5,r("getBlockHeight",{customRPC:h});case 5:v=c.sent,console.info("Block Height",v),v&&o("SAVE_WORKED_RPC",h),e(v),c.next=15;break;case 11:c.prev=11,c.t0=c.catch(1),++d>=k?t(c.t0):n({retryAttempt:d});case 15:case"end":return c.stop()}}),c,null,[[1,11]])})));return function(e){return m.apply(this,arguments)}}();n({})})));case 6:case"end":return e.stop()}}),e)}))),function(e){return G.apply(this,arguments)}),getMinBalanceForTokenAccountActive:function(e){e.dispatch,e.state;var t=e.getters,r=e.rootGetters,n=e.commit,o=t.networkConfig.rpcCallRetryAttempt;return new Promise((function(e,t){var m=function(){var l=Object(c.a)(regeneratorRuntime.mark((function c(l){var d,f,k,h;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=l.retryAttempt,f=void 0===d?1:d,f++,c.prev=2,c.next=5,r["metamask/connection"]();case 5:return k=c.sent,c.next=8,E.b.getMinBalanceRentForExemptAccount(k);case 8:h=c.sent,n("SET_MIN_TOKEN_ACCOUNT_INIT_AMOUNT",h),e(h),c.next=17;break;case 13:c.prev=13,c.t0=c.catch(2),console.info(c.t0),f>=o?t(c.t0):m({retryAttempt:f});case 17:case"end":return c.stop()}}),c,null,[[2,13]])})));return function(e){return l.apply(this,arguments)}}();m({})}))},getFeeRateGovernor:function(e){var t=e.dispatch,r=(e.state,e.getters),n=(e.rootGetters,e.commit),o=r.networkConfig.rpcCallRetryAttempt;return new Promise((function(e,r){var m=function(){var l=Object(c.a)(regeneratorRuntime.mark((function c(l){var d,f,k,h;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=l.retryAttempt,f=void 0===d?1:d,f++,c.prev=2,k={params:{method:"getFeeRateGovernor",params:[]}},c.next=7,t("metamask/sendRrcRequest",k,{root:!0});case 7:(h=c.sent)&&null!=h&&(n("SET_FEE_RATE_GOVERNOR",h.feeRateGovernor),n("SET_MIN_GAS_FEE",h.feeRateGovernor.minLamportsPerSignature)),e(h),c.next=16;break;case 12:c.prev=12,c.t0=c.catch(2),console.info(c.t0),f>=o?r(c.t0):m({retryAttempt:f});case 16:case"end":return c.stop()}}),c,null,[[2,12]])})));return function(e){return l.apply(this,arguments)}}();m({})}))},getSOLMinDepositBalance:function(e){var t=e.dispatch,r=(e.state,e.getters),n=(e.rootGetters,e.commit),o=r.networkConfig.rpcCallRetryAttempt;return new Promise((function(e,r){var m=function(){var l=Object(c.a)(regeneratorRuntime.mark((function c(l){var d,f,k,h;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=l.retryAttempt,f=void 0===d?1:d,f++,c.prev=2,k={params:{method:"getMinimumBalanceForRentExemption",params:[0]}},c.next=7,t("metamask/sendRrcRequest",k,{root:!0});case 7:(h=c.sent)&&null!=h&&n("SET_MIN_DEPOSIT_BALANCE",h),e(h),c.next=16;break;case 12:c.prev=12,c.t0=c.catch(2),console.info(c.t0),f>=o?r(c.t0):m({retryAttempt:f});case 16:case"end":return c.stop()}}),c,null,[[2,12]])})));return function(e){return l.apply(this,arguments)}}();m({})}))},askPermission:function(e,t){var r=e.commit,n=e.dispatch,o=e.getters,m=(e.state,t.providerName),l=t.networkName;return new Promise(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,c){var d,f,h,v,data,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r("SET_PROVIDER_NAME",m),r("SET_NETWORK_NAME",l),r("SET_INITIALIZED",!1),e.next=5,o.getEthereumProvider();case 5:if(d=e.sent,f=void 0,e.prev=7,null==d&&(r("SET_WALLET_STATE",-1),c(new Error("Please Install Metamask"))),e.prev=9,"Slope"!=m){e.next=19;break}return e.next=13,d.connect();case 13:h=e.sent,v=h.msg,data=h.data,"ok"===v&&(r("SET_PUBLICKEY",data.publicKey),f=data.publicKey.toString()),e.next=23;break;case 19:return e.next=21,d.connect();case 21:e.sent&&d.publicKey&&(r("SET_PUBLICKEY",d.publicKey),f=d.publicKey.toString());case 23:e.next=27;break;case 25:e.prev=25,e.t0=e.catch(9);case 27:if(console.info("account",f),null!=f){e.next=32;break}return r("SET_WALLET_STATE",-2),c(new Error("lockedMetamask")),e.abrupt("return");case 32:return r("IDENTIFY",f),n("setAddress",{address:f}),r("SET_WALLET_STATE",1),e.prev=35,e.next=38,n("checkRPCService",{});case 38:e.next=43;break;case 40:e.prev=40,e.t1=e.catch(35),console.info(e.t1);case 43:return e.next=45,n("getBalance");case 45:return w=e.sent,w=Object(k.hexToNumberString)(w),n("saveUserBalance",{balance:w}),e.next=50,n("getMinBalanceForTokenAccountActive");case 50:return e.next=52,n("getSOLMinDepositBalance");case 52:return e.next=54,n("getFeeRateGovernor");case 54:try{(window.imToken||window.ethereum.isImToken)&&r("SET_IS_IMTOKEN",!0),null!=window.trustProvider&&r("SET_IS_TRUSTWALLET",!0),d.on&&(d.on("accountsChanged",(function(e){return U({dispatch:n,commit:r,newAccount:e})})),d.on("chainChanged",(function(e){return window.location.reload()})),d.on("networkChanged",(function(e){return n("onNetworkChanged",{netId:e})})),d.on("open",(function(){console.info("open")})),d.on("close",(function(code,e){console.info(code,e)})))}catch(e){console.info(e)}r("SET_INITIALIZED",!0),n("common/saveLastUsedProviderName",{providerName:m},{root:!0}),n("fetchTokenList",{}),n("bulksender/initBaseParams",{},{root:!0}),n("common/initBaseParams",{},{root:!0}),n("token/initBaseParams",{},{root:!0});try{n("fetchCoinPrice")}catch(e){}t({netId:netId,ethAccount:ethAccounts[0]}),e.next=68;break;case 65:e.prev=65,e.t2=e.catch(7),c(e.t2);case 68:case"end":return e.stop()}}),e,null,[[7,65],[9,25],[35,40]])})));return function(t,r){return e.apply(this,arguments)}}())},saveUserBalance:function(e,t){(0,e.commit)("SET_BALANCE",t.balance)},fetchETHBalance:(K=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,e.prev=1,e.next=4,r("getBalance");case 4:n=e.sent,n=Object(k.hexToNumberString)(n),r("saveUserBalance",{balance:n}),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])}))),function(e){return K.apply(this,arguments)}),fetchTokenList:(B=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f,k,h,w,A,x,O,S,R,_,y,P,C,N,I;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState,o=t.commit,c=t.dispatch,m=t.rootGetters,l=t.state,r.oracleIndex,(d=m["metamask/networkConfig"]).smartContractPollTime,d.gasPrice,d.tokenOracleUrls,f=d.currencyName,k=d.networkName,h=d.specialTokenList,(w=n.metamask).netId,w.isFetching,A=w.ethAccount,w.tokens,x=w.balance,O=w.ethCoinName,n.common.language,e.next=7,m["metamask/connection"]();case 7:return S=e.sent,e.prev=8,R=new T.c(A),e.next=12,S.getParsedTokenAccountsByOwner(R,{programId:E.a});case 12:return _=e.sent,y=_.value,P=[],C=["0x0000000000000000000000000000000000000000"].concat(h),e.next=18,c("fetchTokenInfo",{});case 18:N=e.sent,I=k+O,P.push({symbol:f,name:I,balance:Object(v.a)(x).times(Object(v.a)(10).pow(l.decimals)).toString(10),displayBalance:x,contractAddress:"0x0000000000000000000000000000000000000000",decimals:l.decimals,isETH:!0}),y.forEach((function(e,i){var t=e.account.data.parsed.info,r=t.mint,n=t.tokenAmount.decimals,o=t.tokenAmount.amount,c=t.tokenAmount.uiAmountString,m=(t.owner,t.isNative,t.state,N[r.toLowerCase()]);m||(m={symbol:"SPL",name:"SPL Token"});var l={symbol:m.symbol,name:m.name,balance:o,displayBalance:c,contractAddress:r,decimals:n};P.push(l),h.includes(l.contractAddress)||C.push(l.contractAddress)})),P.sort((function(a,b){return C.indexOf(a.contractAddress)-C.indexOf(b.contractAddress)})),o("SAVE_TOKENS",P),o("SET_FETCHING",!1),e.next=32;break;case 27:return e.prev=27,e.t0=e.catch(8),console.info(e.t0),e.next=32,c("setDefaultTokenList");case 32:case"end":return e.stop()}}),e,null,[[8,27]])}))),function(e,t){return B.apply(this,arguments)}),fetchTokenInfo:(D=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f,k,h,v,w,T,E,x,O,S,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState,o=t.commit,c=t.dispatch,m=t.rootGetters,t.state,l=r.oracleIndex,d=void 0===l?0:l,(f=m["metamask/networkConfig"]).smartContractPollTime,k=f.tokenOracleUrls,h=n.metamask,v=h.netId,w=h.ethAccount,h.tokens,e.next=6,m["metamask/connection"]();case 6:if(e.sent,e.prev=7,d!=k.length){e.next=12;break}return e.abrupt("return",{});case 12:return T=k[d%k.length],E=T.indexOf("api.solscan")>-1,x=T.indexOf("cdn.jsdelivr.net")>-1,E&&(T+=w),O={},e.next=19,Object(A.a)(T);case 19:if(200!==(S=e.sent).status){e.next=29;break}return e.next=23,S.json();case 23:return R=e.sent,E?R.forEach((function(e,i){O[e.tokenAddress.toLowerCase()]={symbol:e.tokenSymbol,name:e.tokenName}})):x&&R.tokens.forEach((function(e,i){e.chainId==v&&(O[e.address.toLowerCase()]={symbol:e.symbol,name:e.name})})),o("SAVE_TOKENS_LIST",O),e.abrupt("return",O);case 29:return d++,e.next=32,c("fetchTokenInfo",{oracleIndex:d});case 32:e.next=37;break;case 34:return e.prev=34,e.t0=e.catch(7),e.abrupt("return",{});case 37:case"end":return e.stop()}}),e,null,[[7,34]])}))),function(e,t){return D.apply(this,arguments)}),setDefaultTokenList:(L=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,l,d,f,k,h,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.rootState,n=t.commit,t.dispatch,o=t.rootGetters,c=t.state,(m=o["metamask/networkConfig"]).smartContractPollTime,m.gasPrice,m.tokenOracleUrls,l=m.currencyName,d=m.networkName,m.specialTokenList,(f=r.metamask).netId,f.isFetching,f.ethAccount,f.tokens,k=f.balance,h=f.ethCoinName,r.common.language,(w=[]).push({symbol:l,name:d+h,balance:Object(v.a)(k).times(Object(v.a)(10).pow(c.decimals)).toString(10),displayBalance:k,contractAddress:"0x0000000000000000000000000000000000000000",decimals:c.decimals,isETH:!0}),n("SAVE_TOKENS",w),n("SET_FETCHING",!1);case 8:case"end":return e.stop()}}),e)}))),function(e){return L.apply(this,arguments)}),fetchGasPrice:(j=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,l,d,f,h,v,w,T,E,A,x,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.rootState,o=t.commit,c=t.dispatch,m=t.rootGetters,l=t.state,d=r.oracleIndex,f=void 0===d?0:d,h=m["metamask/networkConfig"],v=h.smartContractPollTime,w=h.gasPrice,T=h.gasOracleUrls,E=n.metamask.netId,!l.gasPriceOracleLocked){e.next=8;break}return console.info("GasPrice Oracle locked"),setTimeout((function(){return c("fetchGasPrice",{})}),1e3*v),e.abrupt("return");case 8:if(e.prev=8,1!==E&&137!==E&&80001!==E){e.next=37;break}return e.next=12,fetch(T[f%T.length]);case 12:if(200!==(A=e.sent).status){e.next=33;break}return e.next=16,A.json();case 16:(x=e.sent).hasOwnProperty("data")&&(x=x.data),S=O({},w),x.slow&&(S.slow=Number(x.slow),Number(x.slow)>Number(Object(k.toWei)("0.001","gwei"))&&(S.slow=Math.ceil(Number(Object(k.fromWei)(Number(x.slow).toString(),"gwei"))))),x.safeLow&&(S.slow=Number(x.safeLow)),x.fast&&(S.fast=Number(x.fast),Number(x.fast)>Number(Object(k.toWei)("0.001","gwei"))&&(S.fast=Math.ceil(Number(Object(k.fromWei)(Number(x.fast).toString(),"gwei"))))),x.standard&&(S.standard=Number(x.standard),Number(x.standard)>Number(Object(k.toWei)("0.001","gwei"))&&(S.standard=Math.ceil(Number(Object(k.fromWei)(Number(x.standard).toString(),"gwei"))))),x.instant&&(S.instant=Number(x.instant)),x.fastest&&(S.instant=Number(x.fastest)),x.rapid&&(S.instant=Number(x.rapid),Number(x.rapid)>Number(Object(k.toWei)("0.001","gwei"))&&(S.instant=Math.ceil(Number(Object(k.fromWei)(Number(x.rapid).toString(),"gwei"))))),S.slow+=1,S.standard+=1,S.fast+=1,o("SAVE_GAS_PRICE",S),e.next=34;break;case 33:throw Error("Fetch gasPrice failed");case 34:setTimeout((function(){return c("fetchGasPrice",{})}),1e3*v),e.next=38;break;case 37:o("SAVE_GAS_PRICE",w);case 38:e.next=45;break;case 40:e.prev=40,e.t0=e.catch(8),console.error(e.t0),f++,setTimeout((function(){return c("fetchGasPrice",{oracleIndex:f})}),1e3*v);case 45:case"end":return e.stop()}}),e,null,[[8,40]])}))),function(e,t){return j.apply(this,arguments)}),updateGasPrice:(I=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,o=r.gasPrices,(c=Object.assign({},o)).fast=40,n("SAVE_GAS_PRICE",c);case 5:case"end":return e.stop()}}),e)}))),function(e){return I.apply(this,arguments)}),fetchCoinPrice:(N=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,m,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootState,n=t.commit,o=t.dispatch,m=t.rootGetters,t.state,(l=m["metamask/networkConfig"]).smartContractPollTime,d=l.extraFeeOracle,f=l.supportExtraFee,r.metamask.netId,f){e.next=6;break}return n("SET_ETH_PRICE_LOADED",!0),e.abrupt("return");case 6:return e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(c.a)(regeneratorRuntime.mark((function c(m){var l,f,k,h,v,w,T;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return l=m.retryAttempt,f=void 0===l?1:l,f++,c.prev=2,c.next=5,Object(A.a)(d.coinPriceUrl,{timeout:5e3});case 5:if(200!==(k=c.sent).status){c.next=17;break}return c.next=9,k.json();case 9:h=c.sent,v=0,h.hasOwnProperty(d.coinId)&&(v=h[d.coinId].usd),n("SAVE_ETH_PRICE",v),n("SET_ETH_PRICE_LOADED",!0),e(v),c.next=18;break;case 17:throw Error("Fetch coin price failed");case 18:c.next=35;break;case 20:if(c.prev=20,c.t0=c.catch(2),!(f>=2)){c.next=34;break}if(!(w=d.coinBackups)||!w.length){c.next=31;break}return c.next=27,o("fetchCoinPriceFromBackups");case 27:T=c.sent,e(T),c.next=32;break;case 31:t(c.t0);case 32:c.next=35;break;case 34:r({retryAttempt:f});case 35:case"end":return c.stop()}}),c,null,[[2,20]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 8:case"end":return e.stop()}}),e)}))),function(e){return N.apply(this,arguments)}),fetchCoinPriceFromBackups:(C=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,m,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootState,n=t.commit,t.dispatch,o=t.rootGetters,t.state,(m=o["metamask/networkConfig"]).smartContractPollTime,l=m.extraFeeOracle,d=m.supportExtraFee,r.metamask.netId,d){e.next=6;break}return n("SET_ETH_PRICE_LOADED",!0),e.abrupt("return");case 6:return e.abrupt("return",new Promise((function(e,t){var r=function(){var o=Object(c.a)(regeneratorRuntime.mark((function o(c){var m,d,f,k,h,v,w;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(m=c.retryAttempt,d=void 0===m?1:m,d++,o.prev=2,!(f=l.coinBackups)){o.next=20;break}return k=f[d%f.length],o.next=8,Object(A.a)(k);case 8:if(200!==(h=o.sent).status){o.next=19;break}return o.next=12,h.json();case 12:v=o.sent,w=v.data.priceUsd,n("SAVE_ETH_PRICE",w),n("SET_ETH_PRICE_LOADED",!0),e(w),o.next=20;break;case 19:throw Error("Fetch coin price failed");case 20:o.next=26;break;case 22:o.prev=22,o.t0=o.catch(2),console.info(o.t0),d>=3?t(o.t0):r({retryAttempt:d});case 26:case"end":return o.stop()}}),o,null,[[2,22]])})));return function(e){return o.apply(this,arguments)}}();r({})})));case 8:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)})},Object(o.a)(n,"updateGasPrice",(P=Object(c.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,o=r.gasPrices,(c=Object.assign({},o)).fast=40,n("SAVE_GAS_PRICE",c);case 5:case"end":return e.stop()}}),e)}))),function(e){return P.apply(this,arguments)})),Object(o.a)(n,"lockGasPriceOracle",(y=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,n=t.commit,o=r.gasPriceOracleLocked,n("SET_GAS_PRICE_ORACLE_LOCKED",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return y.apply(this,arguments)})),Object(o.a)(n,"getTransactionReceipt",(_=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,m,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,o=r.txHash,m=r.customRPC,l=void 0===m?void 0:m,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(c.a)(regeneratorRuntime.mark((function c(m){var d,f,k,h;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=m.retryAttempt,f=void 0===d?1:d,f++,c.prev=2,k={params:{method:"getSignatureStatuses",params:[[o],{searchTransactionHistory:!0}]}},l&&(k.customRPC=l),c.next=8,n("metamask/sendRrcRequest",k,{root:!0});case 8:h=c.sent,Array.isArray(h)&&h.length>0&&(h=h[0]),e(h),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),f>=2?t(c.t0):r({retryAttempt:f});case 16:case"end":return c.stop()}}),c,null,[[2,13]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return _.apply(this,arguments)})),Object(o.a)(n,"getTransactionInfo",(R=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,m,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,o=r.txHash,m=r.customRPC,l=void 0===m?void 0:m,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(c.a)(regeneratorRuntime.mark((function c(m){var d,f,k,h;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=m.retryAttempt,f=void 0===d?1:d,f++,c.prev=2,k={params:{method:"getConfirmedTransaction",params:[o,{encoding:"jsonParsed"}]}},l&&(k.customRPC=l),c.next=8,n("metamask/sendRrcRequest",k,{root:!0});case 8:h=c.sent,Array.isArray(h)&&h.length>0&&(h=h[0]),e(h),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(2),f>=2?t(c.t0):r({retryAttempt:f});case 16:case"end":return c.stop()}}),c,null,[[2,13]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return R.apply(this,arguments)})),Object(o.a)(n,"getTransactionCount",(S=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var n,o,address;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,t.rootGetters,t.rootState,o=t.dispatch,t.commit,address=r.address,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(c.a)(regeneratorRuntime.mark((function c(m){var l,d,f,k;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return l=m.retryAttempt,d=void 0===l?1:l,d++,c.prev=2,f={from:n.ethAccount,method:"eth_getTransactionCount",params:[address,"latest"]},c.next=6,o("metamask/sendAsync",f,{root:!0});case 6:k=c.sent,e(k),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),d>=2?t(c.t0):r({retryAttempt:d});case 13:case"end":return c.stop()}}),c,null,[[2,10]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return S.apply(this,arguments)})),Object(o.a)(n,"sendAsync",(function(e,t){var r=e.state,n=e.getters,o=(e.rootState,t.method),m=t.from,l=t.params;switch(n.netId){case 77:case 99:break;case 100:m=void 0}return new Promise(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,c){var d,f,k,h,v,w,T,E,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getEthereumProvider();case 2:if(d=e.sent,!1,"walletConnect"!=r.providerName){e.next=54;break}return e.prev=5,e.next=8,d.getWalletConnector();case 8:return f=e.sent,e.next=11,n.web3();case 11:if(e.sent,"eth_sendTransaction"!=o){e.next=19;break}return k=l[0],e.next=16,f.sendTransaction(k);case 16:h=e.sent,console.info(h),t(h);case 19:if("eth_signTransaction"!=o){e.next=24;break}return e.next=22,f.signTransaction(txParam);case 22:v=e.sent,t(v);case 24:if("eth_signTypedData_v3"!=o){e.next=33;break}return l=[l[0],l[1]],e.next=28,f.signTypedData(l);case 28:w=e.sent,console.info(w),t(w),e.next=37;break;case 33:return e.next=35,d.send({id:1314,method:o,params:l,jsonrpc:"2.0",from:m});case 35:(T=e.sent)?t(T):c("get result by walletConnect failed");case 37:e.next=52;break;case 39:return e.prev=39,e.t0=e.catch(5),console.info(e.t0,o),e.prev=42,e.next=45,d.send({id:1314,method:o,params:l,jsonrpc:"2.0"});case 45:(E=e.sent)?t(E):c("Send RPC by walletConnect failed"),e.next=52;break;case 49:e.prev=49,e.t1=e.catch(42),c("Send RPC by walletConnect failed");case 52:e.next=57;break;case 54:A={id:520,method:o,params:l,jsonrpc:"2.0"},console.info(A),d.request(A).then((function(e){t(e)})).catch((function(e){c(e)}));case 57:case"end":return e.stop()}}),e,null,[[5,39],[42,49]])})));return function(t,r){return e.apply(this,arguments)}}())})),Object(o.a)(n,"sendRrcRequest",(function(e,t){e.state;var r=e.getters,n=(e.rootState,t.params),o=t.customRPC,m=void 0===o?void 0:o,l=r.networkConfig.rpcUrl;return m&&(l=m),new Promise(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(t,r){var o,c,m,d,data,f,k,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=parseInt(Date.parse(new Date)),c=!1,Array.isArray(n)?(c=!0,m=[],d=0,n.forEach((function(param,i){param.hasOwnProperty("id")||(param.id=o+d,d+=1),param.jsonrpc="2.0",m.push(param)})),n=m):(n.hasOwnProperty("id")||(n.id=o),n.jsonrpc="2.0"),data=JSON.stringify(n),e.next=7,Object(A.a)(l,{body:data,headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 7:return f=e.sent,e.next=10,f.json();case 10:(k=e.sent).error?r(k.error):c?(h=[],k.forEach((function(e,i){e.error?h.push(e.error):null===e.result.value||null!=e.result.value?h.push(e.result.value):h.push(e.result)})),t(h)):null===k.result.value||null!=k.result.value?t(k.result.value):t(k.result),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}())})),n);t.default={namespaced:!0,state:function(){return{ethAccount:null,accountPublicKey:null,netId:101,currency:"ETH",domainData:{},balance:"0",initialized:!1,address:{value:null,valid:!1},gasPrice:{fast:1,low:1,standard:1,instant:1},gasPriceOracleLocked:!1,providerName:"",networkName:"",tokens:[],tokensForTestnet:[],tokenAddress:"",isFetching:!0,ethCoinName:" Native Currency",walletState:1,isImToken:!1,isTrustWallet:!1,isMetamask:!0,walletName:"",ethPrice:0,ethPriceLoaded:!1,decimals:9,minTokenAccountInitAmount:2039280,minGasFee:5e3,feeRateGovernor:{burnPercent:50,maxLamportsPerSignature:1e5,minLamportsPerSignature:5e3,targetLamportsPerSignature:1e4,targetSignaturesPerSlot:2e4},tokensList:{},minDeposiBalance:890880,workedRPC:void 0}},getters:M,mutations:W,actions:V}}}]);